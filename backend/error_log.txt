============================= test session starts =============================
platform win32 -- Python 3.12.10, pytest-7.4.4, pluggy-1.6.0
rootdir: C:\Users\itaya\.gemini\antigravity\scratch\Sandbox\backend
plugins: anyio-4.12.1, asyncio-0.23.3
asyncio: mode=Mode.STRICT
collected 2 items

tests\test_core\test_config.py FF                                        [100%]

================================== FAILURES ===================================
____________________________ test_config_defaults _____________________________

    def test_config_defaults():
        """
        Test that default values are set correctly when no environment variables are present.
        """
        # Create a new Settings object
        settings = Settings()
    
        assert settings.PROJECT_NAME == "CyberSecurity Sandbox"
        assert settings.POSTGRES_SERVER == "localhost"
        # Check constructed URI
>       assert "postgresql+asyncpg://sandbox_user:sandbox_password@localhost:5432/sandbox_db" == settings.SQLALCHEMY_DATABASE_URI
E       AssertionError: assert 'postgresql+a...32/sandbox_db' == 'sqlite+aiosq..././sql_app.db'
E         - sqlite+aiosqlite:///./sql_app.db
E         + postgresql+asyncpg://sandbox_user:sandbox_password@localhost:5432/sandbox_db

tests\test_core\test_config.py:22: AssertionError
__________________________ test_config_env_override ___________________________

    def test_config_env_override():
        """
        Test that environment variables correctly override the defaults.
        """
        with mock.patch.dict(os.environ, {
            "POSTGRES_USER": "test_user",
            "POSTGRES_DB": "test_db",
            "POSTGRES_PORT": "5433"
        }):
            settings = Settings()
            assert settings.POSTGRES_USER == "test_user"
            assert settings.POSTGRES_DB == "test_db"
>           assert "postgresql+asyncpg://test_user:sandbox_password@localhost:5433/test_db" == settings.SQLALCHEMY_DATABASE_URI
E           AssertionError: assert 'postgresql+a...:5433/test_db' == 'sqlite+aiosq..././sql_app.db'
E             - sqlite+aiosqlite:///./sql_app.db
E             + postgresql+asyncpg://test_user:sandbox_password@localhost:5433/test_db

tests\test_core\test_config.py:36: AssertionError
============================== warnings summary ===============================
..\.venv\Lib\site-packages\pydantic\_internal\_config.py:271
..\.venv\Lib\site-packages\pydantic\_internal\_config.py:271
  C:\Users\itaya\.gemini\antigravity\scratch\Sandbox\.venv\Lib\site-packages\pydantic\_internal\_config.py:271: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/test_core/test_config.py::test_config_defaults - AssertionError:...
FAILED tests/test_core/test_config.py::test_config_env_override - AssertionEr...
======================== 2 failed, 2 warnings in 0.14s ========================
